"use strict";(self["webpackChunkideao"]=self["webpackChunkideao"]||[]).push([[363],{7754:(e,l,a)=>{a.r(l),a.d(l,{default:()=>el});a(71);var i=a(3673),t=a(2323),o=a(8880);const s=e=>((0,i.dD)("data-v-8491266a"),e=e(),(0,i.Cn)(),e),n={class:"wrapper"},u={class:"menu"},v={class:"menu-drop"},c={class:"menu-item"},r=s((()=>(0,i._)("img",{src:"img/camera_45X45.svg"},null,-1))),d={class:"menu-item"},m=s((()=>(0,i._)("img",{src:"img/resolution_45X45.svg"},null,-1))),g={class:"menu-item"},p=s((()=>(0,i._)("img",{src:"img/zoom_45X45.svg"},null,-1))),_={class:"zoomInOut"},h={class:"text"},b={class:"menu-item"},w=s((()=>(0,i._)("img",{src:"img/rotation_45X45.svg"},null,-1))),f={class:"menu-item-right",style:{"justify-content":"start"}},y={class:"menu-item"},k=s((()=>(0,i._)("img",{src:"img/mirror_45X45.svg"},null,-1))),V=s((()=>(0,i._)("div",{class:"text"},"Mirror",-1))),x=[V],D={class:"menu-item"},S=s((()=>(0,i._)("img",{src:"img/flip_45X45.svg"},null,-1))),X=s((()=>(0,i._)("div",{class:"text"},"Flip",-1))),C=[X],U={class:"menu-item"},H=s((()=>(0,i._)("img",{src:"img/freeze_45X45.svg"},null,-1))),I=s((()=>(0,i._)("div",{class:"text"},"Freeze",-1))),M=[I],R={class:"menu-item"},z=s((()=>(0,i._)("img",{src:"img/reset_45X45.svg"},null,-1))),F=s((()=>(0,i._)("div",{class:"text"},"Reset",-1))),P=[F],L={class:"setting"},O={class:"setting-drop"},T={class:"menu-item"},q=s((()=>(0,i._)("img",{src:"img/G_45X45.svg"},null,-1))),G={class:"menu-item-right"},Z={class:"username"},W={class:"text"},j=s((()=>(0,i._)("div",{class:"text"},"Sign in",-1))),E=[j],N={class:"menu-item"},A=s((()=>(0,i._)("img",{src:"img/cloud-file-location_45X45.svg"},null,-1))),Y={class:"menu-item"},Q=s((()=>(0,i._)("img",{src:"img/microphone_45X45.svg"},null,-1))),B={class:"menu-item-right"},J={class:"menu-item"},K=s((()=>(0,i._)("img",{src:"img/video-resolution_45X45.svg"},null,-1))),$={class:"menu-item"},ee=s((()=>(0,i._)("img",{src:"img/timer_45X45.svg"},null,-1))),le={class:"menu-item"},ae=s((()=>(0,i._)("img",{src:"img/refresh-rate_45X45.svg"},null,-1))),ie={class:"radio-wrapper"},te={class:"radio"},oe=s((()=>(0,i._)("label",{for:"50"},[(0,i._)("div",{class:"text"},"50 Hz")],-1))),se={class:"radio"},ne=s((()=>(0,i._)("label",{for:"60"},[(0,i._)("div",{class:"text"},"60 Hz")],-1))),ue=s((()=>(0,i._)("div",{class:"menu-item fti"},[(0,i._)("img",{src:"img/fti-logo_H48.svg",class:"fti-logo"}),(0,i._)("div",{class:"fti-text"},[(0,i._)("div",{class:"text"}," Â© Fun Technology Innovation Inc. All rights reserved. ")])],-1))),ve=s((()=>(0,i._)("div",{class:"logo"},[(0,i._)("a",{href:"https://funtechinnovation.com/software/ideaocam/",target:"_blank"})],-1))),ce={key:0,class:"icon",src:"img/full-screen_50X50.svg"},re={key:1,class:"icon",src:"img/exit-full-screen_50X50.svg"},de=s((()=>(0,i._)("div",{class:"snapshot-record selected"},[(0,i._)("img",{class:"icon",src:"img/snapshot_40X40.svg"}),(0,i._)("div",{class:"text"},"Snapshot & Record")],-1))),me=s((()=>(0,i._)("img",{class:"icon",src:"img/stop-motion_40X40.svg"},null,-1))),ge=s((()=>(0,i._)("div",{class:"text"},"Stop Motion",-1))),pe=[me,ge],_e={class:"countdown"},he={class:"camera"},be=s((()=>(0,i._)("div",null,null,-1))),we=s((()=>(0,i._)("div",null,null,-1))),fe={class:"camera-video-mic"},ye={class:"camera"},ke={key:0,class:"video"},Ve={key:1,class:"video-mode"},xe={class:"rec"},De=s((()=>(0,i._)("div",{class:"dot"},null,-1))),Se=s((()=>(0,i._)("div",{class:"text"},"REC",-1))),Xe={class:"time"},Ce={key:0,class:"icon",src:"img/pause_40X40.svg"},Ue={key:1,class:"icon",src:"img/play_40X40.svg"},He=s((()=>(0,i._)("img",{class:"icon",src:"img/stop_40X40.svg"},null,-1))),Ie=[He],Me={class:"mic"},Re=["src"],ze=["src"],Fe={ref:"canvas",style:{display:"none",position:"absolute",left:"0",top:"0",opacity:"0.5"}};function Pe(e,l,a,s,V,X){const I=(0,i.up)("combobox2"),F=(0,i.up)("q-slider"),j=(0,i.up)("q-menu"),me=(0,i.up)("q-toggle"),ge=(0,i.up)("q-circular-progress");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",u,[(0,i._)("img",{class:(0,t.C_)({icon:!0,selected:e.menuDropDisplay}),src:"img/menu_50X50.svg"},null,2),(0,i.Wm)(j,{modelValue:e.menuDropDisplay,"onUpdate:modelValue":l[12]||(l[12]=l=>e.menuDropDisplay=l),anchor:"bottom left",self:"top left",offset:[0,20],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i._)("div",c,[r,(0,i.Wm)(I,{options:e.cameraDeviceList,"option-label":"label","option-value":"value",modelValue:e.cameraDevice,"onUpdate:modelValue":l[0]||(l[0]=l=>e.cameraDevice=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])]),(0,i._)("div",d,[m,(0,i._)("div",null,[(0,i.Wm)(I,{options:e.resolutionList,"option-label":"label","option-value":"value",modelValue:e.resolution,"onUpdate:modelValue":l[1]||(l[1]=l=>e.resolution=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",g,[p,(0,i._)("div",_,[(0,i._)("div",h,(0,t.zw)(1==(e.zoomInOutSlider/10).toString().length?(e.zoomInOutSlider/10).toString()+".0":(e.zoomInOutSlider/10).toString())+" x ",1),(0,i._)("img",{class:"minus zoom",src:"img/minus_20X20.svg",onClick:l[2]||(l[2]=(...l)=>e.onZoomOut&&e.onZoomOut(...l))}),(0,i.Wm)(F,{modelValue:e.zoomInOutSlider,"onUpdate:modelValue":l[3]||(l[3]=l=>e.zoomInOutSlider=l),min:10,max:60,step:1,"track-size":"4px","thumb-size":"10px","selection-color":"transparent","inner-track-color":"white",color:"deep-orange",class:"menu-slider"},null,8,["modelValue"]),(0,i._)("img",{class:"plus",src:"img/plus_20X20.svg",onClick:l[4]||(l[4]=(...l)=>e.onZoomIn&&e.onZoomIn(...l))})])]),(0,i._)("div",b,[w,(0,i._)("div",f,[(0,i.Wm)(I,{options:e.angleList,"option-label":"label","option-value":"value",modelValue:e.angle,"onUpdate:modelValue":l[5]||(l[5]=l=>e.angle=l),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"]),(0,i._)("img",{src:"img/CW_25X25.svg",class:"cw",onClick:l[6]||(l[6]=(...l)=>e.onNextRotate&&e.onNextRotate(...l))}),(0,i._)("img",{src:"img/CCW_25X25.svg",class:"ccw",onClick:l[7]||(l[7]=(...l)=>e.onPreviousRotate&&e.onPreviousRotate(...l))})])]),(0,i._)("div",y,[k,(0,i._)("div",{class:"button",onClick:l[8]||(l[8]=l=>e.isMirror=!e.isMirror)},x)]),(0,i._)("div",D,[S,(0,i._)("div",{class:"button",onClick:l[9]||(l[9]=l=>e.isFlip=!e.isFlip)},C)]),(0,i._)("div",U,[H,(0,i._)("div",{class:"button",onClick:l[10]||(l[10]=(...l)=>e.onToggleFreeze&&e.onToggleFreeze(...l))},M)]),(0,i._)("div",R,[z,(0,i._)("div",{class:"button",onClick:l[11]||(l[11]=(...l)=>e.onReset&&e.onReset(...l))},P)])])])),_:1},8,["modelValue"])]),(0,i._)("div",L,[(0,i._)("img",{class:(0,t.C_)({icon:!0,selected:e.settingDropDisplay}),src:"img/setting_50X50.svg"},null,2),(0,i.Wm)(j,{modelValue:e.settingDropDisplay,"onUpdate:modelValue":l[22]||(l[22]=l=>e.settingDropDisplay=l),anchor:"bottom left",self:"top left",offset:[0,20],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",O,[(0,i._)("div",T,[q,(0,i._)("div",G,[(0,i._)("div",Z,[(0,i._)("div",W,(0,t.zw)(e.username),1)]),((0,i.wg)(),(0,i.iD)("div",{key:0,class:"button",onClick:l[13]||(l[13]=(...l)=>e.onGoogleSignIn&&e.onGoogleSignIn(...l))},E)),(0,i.kq)("",!0)])]),(0,i._)("div",N,[A,(0,i._)("div",null,[(0,i.Wm)(I,{options:e.fileLocationList,"option-label":"label","option-value":"value",modelValue:e.fileLocation,"onUpdate:modelValue":l[15]||(l[15]=l=>e.fileLocation=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",Y,[Q,(0,i._)("div",B,[(0,i.Wm)(me,{modelValue:e.useMic,"onUpdate:modelValue":l[16]||(l[16]=l=>e.useMic=l),class:"toggle-mic"},null,8,["modelValue"]),(0,i.Wm)(I,{options:e.microDeviceList,"option-label":"label","option-value":"value",modelValue:e.microDevice,"onUpdate:modelValue":l[17]||(l[17]=l=>e.microDevice=l),style:{width:"140px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",J,[K,(0,i._)("div",null,[(0,i.Wm)(I,{options:e.videoResolutionList,"option-label":"label","option-value":"value",modelValue:e.videoResolution,"onUpdate:modelValue":l[18]||(l[18]=l=>e.videoResolution=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",$,[ee,(0,i._)("div",null,[(0,i.Wm)(I,{options:e.cameraCountdownSettingList,"option-label":"label","option-value":"value",modelValue:e.cameraCountdownSetting,"onUpdate:modelValue":l[19]||(l[19]=l=>e.cameraCountdownSetting=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",le,[ae,(0,i._)("div",ie,[(0,i._)("div",te,[(0,i.wy)((0,i._)("input",{type:"radio",id:"50",name:"refreshRate",value:"50","onUpdate:modelValue":l[20]||(l[20]=l=>e.refreshRate=l)},null,512),[[o.G2,e.refreshRate]]),oe]),(0,i._)("div",se,[(0,i.wy)((0,i._)("input",{type:"radio",id:"60",name:"refreshRate",value:"60","onUpdate:modelValue":l[21]||(l[21]=l=>e.refreshRate=l)},null,512),[[o.G2,e.refreshRate]]),ne])])]),ue])])),_:1},8,["modelValue"])]),ve,(0,i._)("div",{class:"full-screen",onClick:l[23]||(l[23]=l=>e.isFullScreen=!e.isFullScreen)},[e.isFullScreen?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",ce)),e.isFullScreen?((0,i.wg)(),(0,i.iD)("img",re)):(0,i.kq)("",!0)]),de,(0,i._)("div",{class:"stop-motion",onClick:l[24]||(l[24]=(...l)=>e.onGoStopMotion&&e.onGoStopMotion(...l))},pe),(0,i._)("div",_e,[(0,i._)("div",he,[e.cameraCountdown>0?((0,i.wg)(),(0,i.j4)(ge,{key:0,"show-value":"",value:e.cameraCountdownProgress,"font-size":"24px",size:"48px",thickness:.15,color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,t.zw)(e.cameraCountdown),1)])),_:1},8,["value","thickness"])):(0,i.kq)("",!0)]),be,we]),(0,i._)("div",fe,[(0,i._)("div",ye,[(0,i._)("img",{class:"icon",src:"img/camera_round_80X80.svg",onClick:l[25]||(l[25]=(...l)=>e.onUseCamera&&e.onUseCamera(...l))})]),e.isVideoMode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ke,[(0,i._)("img",{class:"icon",src:"img/video_round_80X80.svg",onClick:l[26]||(l[26]=(...l)=>e.onUseVideoStart&&e.onUseVideoStart(...l))})])),e.isVideoMode?((0,i.wg)(),(0,i.iD)("div",Ve,[(0,i._)("div",xe,[De,Se,(0,i._)("div",Xe,(0,t.zw)(e.videoMinutes)+":"+(0,t.zw)(e.videoSeconds),1)]),(0,i._)("div",{class:"play-pause",onClick:l[27]||(l[27]=(...l)=>e.onUseVideoPause&&e.onUseVideoPause(...l))},[e.videoPause?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",Ce)),e.videoPause?((0,i.wg)(),(0,i.iD)("img",Ue)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"stop",onClick:l[28]||(l[28]=(...l)=>e.onUseVideoStop&&e.onUseVideoStop(...l))},Ie)])):(0,i.kq)("",!0),(0,i._)("div",Me,[e.useMic?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"icon",src:"img/microphone_round_80X80.svg",onClick:l[29]||(l[29]=(...l)=>e.onUseMic&&e.onUseMic(...l))})):(0,i.kq)("",!0),e.useMic?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",{key:1,class:"icon",src:"img/microphone-off_round_80X80.svg",onClick:l[30]||(l[30]=(...l)=>e.onUseMic&&e.onUseMic(...l))}))])]),(0,i._)("div",{class:"thumbnail",onClick:l[31]||(l[31]=(...l)=>e.onGoViewer&&e.onGoViewer(...l))},[""!=e.thumbnail?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.thumbnail},null,8,Re)):(0,i.kq)("",!0),""!==e.outputVideoURL?((0,i.wg)(),(0,i.iD)("video",{key:1,src:e.outputVideoURL},null,8,ze)):(0,i.kq)("",!0)]),(0,i._)("div",{ref:"cameraWapper",class:(0,t.C_)({"camera-screen":!0,"resolution-9_16":.5625==e.resolutionRatio,"full-screen-mode":e.isFullScreen})},[(0,i._)("video",{ref:"localVideo",autoplay:"",playsinline:"",muted:"",style:(0,t.j5)({transform:"scale("+(1==e.angle.value||3==e.angle.value?(e.zoomInOutSlider/10*.75).toString():(e.zoomInOutSlider/10*1).toString())+") rotate("+90*e.angle.value+"deg)"+(e.isMirror?" scaleX(-1)":"")+(e.isFlip?" scaleY(-1)":"")})},null,4),(0,i._)("canvas",Fe,null,512)],2)])}var Le=a(1959),Oe=a(9582),Te=a(3617),qe=a(8825),Ge=a(958),Ze=a(3659),We=a(272);const je=(0,i.aZ)({name:"PageIndex",components:{combobox2:We.Z},setup(){const e=(0,Oe.tv)(),l=(0,Te.oR)(),a=(0,qe.Z)(),{guidHelper:t,timestampHelper:o,initFileSystem:s,saveFile:n,getUrlByFilename:u}=(0,Ge.Z)(),v=(0,Le.iH)(),c=(0,Le.iH)(),r=(0,Le.Fl)((()=>l.getters["extension/cameraDevice"])),d=(0,Le.Fl)((()=>l.getters["extension/microDevice"])),m=(0,Le.Fl)((()=>l.getters["extension/resolution"])),g=e=>l.dispatch("extension/setCameraDevice",e),p=e=>l.dispatch("extension/setMicroDevice",e),_=e=>l.dispatch("extension/setResolution",e),h=(0,Le.iH)(),b=(0,Le.iH)([]),w=(0,Le.iH)(),f=(0,Le.iH)([]),y=(0,Le.Fl)((()=>Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]))),k=(0,Le.iH)({label:"640 X 480",value:0}),V=(0,Le.iH)([{label:"640 X 480",value:0},{label:"800 X 600",value:1},{label:"1024 X 768",value:2},{label:"1280 X 720",value:3},{label:"1600 X 1200",value:4},{label:"1920 X 1080",value:5},{label:"1920 X 1440",value:5},{label:"2048 X 1536",value:6},{label:"2592 X 1458",value:7},{label:"2592 X 1944",value:8},{label:"3264 X 2448",value:9}]),x=(0,Le.iH)(!1),D=(0,Le.iH)(!1),S=(0,Le.iH)(!1),X=(0,Le.iH)(0),C=(0,Le.iH)(0),U=(0,Le.iH)(!1),H=(0,Le.iH)(!1),I=(0,Le.iH)(!1),M=(0,Le.iH)(!0),R=(0,Le.iH)(!1),z=(0,Le.iH)("00"),F=(0,Le.iH)("00"),P=(0,Le.iH)(""),L=(0,Le.iH)(""),O=(0,Le.iH)({label:"480 P",value:0}),T=(0,Le.iH)([{label:"480 P",value:0},{label:"720 P",value:1},{label:"1080 P",value:2}]),q=(0,Le.iH)({label:"Off",value:0}),G=(0,Le.iH)([{label:"Off",value:0},{label:"1s",value:1},{label:"2s",value:2},{label:"3s",value:3},{label:"4s",value:4},{label:"5s",value:5}]),Z=(0,Le.iH)({label:"0Â°",value:0}),W=(0,Le.iH)([{label:"0Â°",value:0},{label:"90Â°",value:1},{label:"180Â°",value:2},{label:"270Â°",value:3}]),j=(0,Le.iH)(10),E=(0,Le.iH)(!1),N=(0,Le.iH)(!1),A=(0,Le.iH)(50),Y=(0,Le.iH)("Link your Google account"),Q=(0,Le.iH)({label:"ideaocam files on google drive",value:"ideaocam files"}),B=(0,Le.iH)([{label:"ideaocam files on google drive",value:"ideaocam files"}]);let J=!0,K=null,$=null,ee=[],le=null,ae=null;const ie=(0,Le.Fl)((()=>l.getters["extension/viewers"])),te=e=>l.dispatch("extension/setViewers",e),oe=((0,Le.Fl)((()=>l.getters["extension/googleDriveFolder"])),e=>l.dispatch("extension/setGoogleDriveFolder",e));(0,i.YP)(S,(async e=>{J||(S.value?a.fullscreen.request():a.fullscreen.exit())})),(0,i.YP)(a.fullscreen.isActive,(e=>{J||(S.value=a.fullscreen.isActive)})),(0,i.YP)(h,(async e=>{e&&!J&&(g(h.value),k.value=V.value[0],_(V.value[0]),await ue())})),(0,i.YP)(k,(async e=>{e&&!J&&(_(k.value),await ue())})),(0,i.YP)(w,(async e=>{e&&!J&&(p(w.value),await ue())})),(0,i.YP)(A,(async e=>{e&&!J&&await ue()})),(0,i.YP)(Q,(async e=>{e&&!J&&oe(e)})),(0,i.bv)((async()=>{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,S.value=a.fullscreen.isActive,oe(Q.value),null!=r.value&&Object.keys(r.value).length>0&&(h.value=r.value),null!=d.value&&Object.keys(d.value).length>0&&(w.value=d.value),null!=m.value&&Object.keys(m.value).length>0?k.value=m.value:(k.value=V.value[0],_(V.value[0])),await se(),await ne(),await ue(),ae=await s(),navigator.mediaDevices.ondevicechange=async()=>{h.value=b.value[0],g(h.value),w.value=f.value[0],p(w.value),k.value=V.value[0],_(V.value[0]),await se(),await ne()},J=!1}));const se=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),l=e.filter((e=>"videoinput"===e.kind));b.value=[];for(let a in l)b.value.push({label:l[a].label,value:l[a].deviceId});null!=r.value&&Object.keys(r.value).length>0?h.value=r.value:(h.value=b.value[0],g(h.value))},ne=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),l=e.filter((e=>"audioinput"===e.kind));f.value=[];for(let a in l)f.value.push({label:l[a].label,value:l[a].deviceId});null!=d.value&&Object.keys(d.value).length>0?w.value=d.value:(w.value=f.value[0],p(w.value))},ue=async()=>{null!=K&&K.getTracks().forEach((function(e){e.stop()})),K=null;let e=Number(k.value.label.split(" X ")[0]),l=Number(k.value.label.split(" X ")[1]);try{K=await navigator.mediaDevices.getUserMedia({audio:{deviceId:w.value.value},video:{deviceId:h.value.value,width:{exact:e},height:{exact:l},frameRate:{ideal:A.value}}})}catch(a){console.log(a),k.value=V.value[0],_(V.value[0]),K=await navigator.mediaDevices.getUserMedia({audio:{deviceId:w.value.value},video:{deviceId:h.value.value,width:{exact:Number(k.value.label.split(" X ")[0])},height:{exact:Number(k.value.label.split(" X ")[1])},frameRate:{ideal:A.value}}})}K.getAudioTracks().forEach((e=>{e.enabled=M.value})),v.value.srcObject=K,v.value.onloadedmetadata=function(e){v.value.play()},$=new MediaRecorder(K),$.addEventListener("dataavailable",ve),$.addEventListener("stop",ce)},ve=e=>{ee.push(e.data)},ce=async e=>{var l=new Blob(ee,{type:"video/webm; codecs=vp9"});ee=[],P.value="";let a=o()+".webm",i="video/webm";await n(ae,a,l,i);let s=await u(ae,a,i);L.value=s;let v=Object.assign([],ie.value);v.push({id:t(),type:"video",mimeType:i,filename:a,src:s,createTime:new Date}),te(v),await ue()},re=()=>{e.push({path:"/stopMotion"})},de=async()=>{if(!I.value){if(H.value=!0,q.value.value>0){X.value=q.value.value,C.value=1;let e=setInterval((async()=>{X.value-=1,C.value=1/(q.value.value-1)*(q.value.value-X.value)*100,0==X.value&&(clearInterval(e),await ue(),setTimeout((()=>{me()}),100))}),1e3)}else await ue(),setTimeout((()=>{me()}),100);H.value=!1}},me=async()=>{c.value.width=K.getVideoTracks()[0].getSettings().width,c.value.height=K.getVideoTracks()[0].getSettings().height;let e=c.value.getContext("2d");e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1,e.imageSmoothingQuality="high",1===Z.value.value||3===Z.value.value?(c.value.width=K.getVideoTracks()[0].getSettings().height,c.value.height=K.getVideoTracks()[0].getSettings().width,e.translate(c.value.width/2,c.value.height/2),e.rotate(90*Z.value.value*Math.PI/180),j.value>10&&e.scale(j.value/10,j.value/10),E.value&&e.scale(-1,1),N.value&&e.scale(1,-1),e.translate(-c.value.height/2,-c.value.width/2)):(e.translate(c.value.width/2,c.value.height/2),e.rotate(90*Z.value.value*Math.PI/180),j.value>10&&e.scale(j.value/10,j.value/10),E.value&&e.scale(-1,1),N.value&&e.scale(1,-1),e.translate(-c.value.width/2,-c.value.height/2)),e.drawImage(v.value,0,0),L.value="";let l="image/jpeg",a=o()+".jpg";c.value.toBlob((async e=>{await n(ae,a,e,l);let i=await u(ae,a,l);P.value=i;let o=Object.assign([],ie.value);o.push({id:t(),type:"image",mimeType:l,filename:a,src:i,createTime:new Date,isUpload:Ze.googleOAuth2.isAuthorized.value}),te(o)}),l)},ge=async()=>{H.value||(I.value=!0,U.value=!0,R.value=!1,await ue(),setTimeout((()=>{$.start(10),pe()}),100))},pe=()=>{z.value="00",F.value="00",le=setInterval((()=>{if(R.value)return;let e=parseInt(F.value)+1;if(F.value=("0"+e).slice(-2),0==e){let e=parseInt(z.value)+1;z.value=("0"+e).slice(-2)}}),1e3)},_e=async()=>{U.value=!1,$.stop(),clearInterval(le),I.value=!1},he=async()=>{R.value=!R.value,"recording"===$.state?$.pause():"paused"===$.state&&$.resume()},be=()=>{M.value=!M.value,K.getAudioTracks().forEach((e=>{e.enabled=M.value}))},we=()=>{K.getTracks().forEach((function(e){e.stop()})),K=null,e.push({path:"/viewer"})},fe=()=>{60!=j.value&&(j.value=j.value+1)},ye=()=>{10!=j.value&&(j.value=j.value-1)},ke=()=>{let e=(0==Z.value.value?3:Z.value.value-1)%W.value.length;Z.value=W.value.find((l=>l.value==e))},Ve=()=>{let e=(Z.value.value+1)%W.value.length;Z.value=W.value.find((l=>l.value==e))},xe=()=>{v.value.paused?v.value.play():v.value.pause()},De=()=>{j.value=10,Z.value=W.value[0],E.value=!1,N.value=!1,v.value.play()},Se=async()=>{},Xe=async()=>{};return{localVideo:v,canvas:c,cameraDevice:h,cameraDeviceList:b,microDevice:w,microDeviceList:f,resolution:k,resolutionList:V,resolutionRatio:y,menuDropDisplay:x,settingDropDisplay:D,isFullScreen:S,cameraCountdown:X,cameraCountdownProgress:C,isVideoMode:U,useMic:M,videoPause:R,videoMinutes:z,videoSeconds:F,videoResolution:O,videoResolutionList:T,cameraCountdownSetting:q,cameraCountdownSettingList:G,thumbnail:P,outputVideoURL:L,angle:Z,angleList:W,zoomInOutSlider:j,isMirror:E,isFlip:N,refreshRate:A,onGoStopMotion:re,onUseCamera:de,onUseVideoStart:ge,onUseVideoStop:_e,onUseVideoPause:he,onUseMic:be,onGoViewer:we,onZoomIn:fe,onZoomOut:ye,onPreviousRotate:ke,onNextRotate:Ve,onToggleFreeze:xe,onReset:De,username:Y,onGoogleSignIn:Se,onGoogleSignOut:Xe,fileLocation:Q,fileLocationList:B}}});var Ee=a(4260),Ne=a(6335),Ae=a(5153),Ye=a(4620),Qe=a(6122),Be=a(5151),Je=a(7518),Ke=a.n(Je);const $e=(0,Ee.Z)(je,[["render",Pe],["__scopeId","data-v-8491266a"]]),el=$e;Ke()(je,"components",{QMenu:Ne.Z,QSlider:Ae.Z,QToggle:Ye.Z,QCircularProgress:Qe.Z,QResizeObserver:Be.Z})}}]);