"use strict";(self["webpackChunkideaocam"]=self["webpackChunkideaocam"]||[]).push([[289],{9240:(e,l,a)=>{a.r(l),a.d(l,{default:()=>dl});a(71);var i=a(3673),o=a(2323),t=a(8880);const s=e=>((0,i.dD)("data-v-20685e28"),e=e(),(0,i.Cn)(),e),u={class:"wrapper"},n={class:"menu"},c={class:"menu-drop"},v={class:"menu-item"},r=s((()=>(0,i._)("img",{src:"img/camera_45X45.svg"},null,-1))),d={class:"menu-item"},m=s((()=>(0,i._)("img",{src:"img/resolution_45X45.svg"},null,-1))),g={class:"menu-item"},p=s((()=>(0,i._)("img",{src:"img/zoom_45X45.svg"},null,-1))),h={class:"zoomInOut"},w={class:"text"},_={class:"menu-item"},b=s((()=>(0,i._)("img",{src:"img/rotation_45X45.svg"},null,-1))),f={class:"menu-item-right",style:{"justify-content":"start"}},y={class:"menu-item"},k=s((()=>(0,i._)("img",{src:"img/mirror_45X45.svg"},null,-1))),x=s((()=>(0,i._)("div",{class:"text"},"Mirror",-1))),D=[x],C={class:"menu-item"},V=s((()=>(0,i._)("img",{src:"img/flip_45X45.svg"},null,-1))),S=s((()=>(0,i._)("div",{class:"text"},"Flip",-1))),I=[S],X={class:"menu-item"},U=s((()=>(0,i._)("div",{class:"text"},"Freeze",-1))),R=[U],H={class:"menu-item"},O=s((()=>(0,i._)("img",{src:"img/reset_45X45.svg"},null,-1))),z=s((()=>(0,i._)("div",{class:"text"},"Reset",-1))),M=[z],T={class:"setting"},L={class:"setting-drop"},j={class:"menu-item"},F={style:{width:"20px",height:"20px","margin-right":"10px"}},P={class:"menu-item-right"},q={class:"text"},A=s((()=>(0,i._)("div",{class:"text"},"Sign out",-1))),Z=[A],E={class:"menu-item"},W=s((()=>(0,i._)("img",{src:"img/cloud-file-location_45X45.svg"},null,-1))),G={class:"menu-item"},N=s((()=>(0,i._)("img",{src:"img/microphone_45X45.svg"},null,-1))),Q={class:"menu-item-right"},Y={class:"menu-item"},B=s((()=>(0,i._)("img",{src:"img/video-resolution_45X45.svg"},null,-1))),K={class:"menu-item"},J=s((()=>(0,i._)("img",{src:"img/timer_45X45.svg"},null,-1))),$={class:"menu-item",style:{visibility:"hidden"}},ee=s((()=>(0,i._)("img",{src:"img/refresh-rate_45X45.svg"},null,-1))),le={class:"radio-wrapper"},ae={class:"radio"},ie=s((()=>(0,i._)("label",{for:"50"},[(0,i._)("div",{class:"text"},"50 Hz")],-1))),oe={class:"radio"},te=s((()=>(0,i._)("label",{for:"60"},[(0,i._)("div",{class:"text"},"60 Hz")],-1))),se=s((()=>(0,i._)("div",{class:"menu-item fti"},[(0,i._)("img",{src:"img/fti-logo_H48.svg",class:"fti-logo"}),(0,i._)("div",{class:"fti-text"},[(0,i._)("div",{class:"text"}," © Fun Technology Innovation Inc. All rights reserved. ")])],-1))),ue={key:0,class:"logo"},ne=s((()=>(0,i._)("a",{href:"https://funtechinnovation.com/software/ideaocam/",target:"_blank"},null,-1))),ce=[ne],ve={key:0,class:"icon",src:"img/full-screen_50X50.svg"},re={key:1,class:"icon",src:"img/exit-full-screen_50X50.svg"},de=s((()=>(0,i._)("div",{class:"snapshot-record selected"},[(0,i._)("img",{class:"icon",src:"img/snapshot_40X40.svg"}),(0,i._)("div",{class:"text"},"Snapshot & Record")],-1))),me=s((()=>(0,i._)("img",{class:"icon",src:"img/stop-motion_40X40.svg"},null,-1))),ge=s((()=>(0,i._)("div",{class:"text"},"Stop Motion",-1))),pe=[me,ge],he={class:"countdown"},we={class:"camera"},_e=s((()=>(0,i._)("div",null,null,-1))),be=s((()=>(0,i._)("div",null,null,-1))),fe={class:"camera-video-mic"},ye={class:"camera"},ke={key:0,class:"video"},xe={key:1,class:"video-mode"},De={class:"rec"},Ce=s((()=>(0,i._)("div",{class:"dot"},null,-1))),Ve=s((()=>(0,i._)("div",{class:"text"},"REC",-1))),Se={class:"time"},Ie={key:0,class:"icon",src:"img/pause_40X40.svg"},Xe={key:1,class:"icon",src:"img/play_40X40.svg"},Ue=s((()=>(0,i._)("img",{class:"icon",src:"img/stop_40X40.svg"},null,-1))),Re=[Ue],He={class:"mic"},Oe=["src"],ze=["src"],Me={ref:"canvas",style:{display:"none",position:"absolute",left:"0",top:"0",opacity:"0.5"}},Te={class:"close"},Le=s((()=>(0,i._)("img",{src:"img/esc_20X20.svg"},null,-1))),je=[Le],Fe=s((()=>(0,i._)("div",{class:"img"},[(0,i._)("img",{src:"img/excalmation_50X50.svg"})],-1))),Pe=s((()=>(0,i._)("div",{class:"text"},"Please connect ideao DC400.",-1))),qe={class:"button"},Ae=s((()=>(0,i._)("div",{class:"text"},"OK",-1))),Ze=[Ae];function Ee(e,l,a,s,x,S){const U=(0,i.up)("combobox2"),z=(0,i.up)("q-slider"),A=(0,i.up)("q-menu"),ne=(0,i.up)("q-toggle"),me=(0,i.up)("q-circular-progress"),ge=(0,i.up)("q-card-section"),Ue=(0,i.up)("q-card-actions"),Le=(0,i.up)("q-card"),Ae=(0,i.up)("q-dialog"),Ee=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",u,[(0,i._)("div",n,[(0,i._)("img",{class:(0,o.C_)({icon:!0,selected:e.menuDropDisplay}),src:"img/menu_50X50.svg"},null,2),(0,i.Wm)(A,{modelValue:e.menuDropDisplay,"onUpdate:modelValue":l[12]||(l[12]=l=>e.menuDropDisplay=l),anchor:"bottom left",self:"top left",offset:[0,15],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i._)("div",v,[r,(0,i.Wm)(U,{options:e.cameraDeviceList,"option-label":"label","option-value":"value",modelValue:e.cameraDevice,"onUpdate:modelValue":l[0]||(l[0]=l=>e.cameraDevice=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])]),(0,i._)("div",d,[m,(0,i._)("div",null,[(0,i.Wm)(U,{options:e.resolutionList,"option-label":"label","option-value":"value",modelValue:e.resolution,"onUpdate:modelValue":l[1]||(l[1]=l=>e.resolution=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",g,[p,(0,i._)("div",h,[(0,i._)("div",w,(0,o.zw)(1==(e.zoomInOutSlider/10).toString().length?(e.zoomInOutSlider/10).toString()+".0":(e.zoomInOutSlider/10).toString())+" x ",1),(0,i._)("img",{class:"minus zoom",src:"img/minus_20X20.svg",onClick:l[2]||(l[2]=(...l)=>e.onZoomOut&&e.onZoomOut(...l))}),(0,i.Wm)(z,{modelValue:e.zoomInOutSlider,"onUpdate:modelValue":l[3]||(l[3]=l=>e.zoomInOutSlider=l),min:10,max:60,step:1,"track-size":"4px","thumb-size":"10px","inner-track-color":"white",color:"deep-orange",class:"menu-slider"},null,8,["modelValue"]),(0,i._)("img",{class:"plus",src:"img/plus_20X20.svg",onClick:l[4]||(l[4]=(...l)=>e.onZoomIn&&e.onZoomIn(...l))})])]),(0,i._)("div",_,[b,(0,i._)("div",f,[(0,i.Wm)(U,{options:e.angleList,"option-label":"label","option-value":"value",modelValue:e.angle,"onUpdate:modelValue":l[5]||(l[5]=l=>e.angle=l),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"]),(0,i._)("img",{src:"img/CW_25X25.svg",class:"cw",onClick:l[6]||(l[6]=(...l)=>e.onNextRotate&&e.onNextRotate(...l))}),(0,i._)("img",{src:"img/CCW_25X25.svg",class:"ccw",onClick:l[7]||(l[7]=(...l)=>e.onPreviousRotate&&e.onPreviousRotate(...l))})])]),(0,i._)("div",y,[k,(0,i._)("div",{class:"button",onClick:l[8]||(l[8]=l=>e.isMirror=!e.isMirror)},D)]),(0,i._)("div",C,[V,(0,i._)("div",{class:"button",onClick:l[9]||(l[9]=l=>e.isFlip=!e.isFlip)},I)]),(0,i._)("div",X,[(0,i._)("img",{class:(0,o.C_)({freeze:e.isFreeze}),src:"img/freeze_45X45.svg"},null,2),(0,i._)("div",{class:"button",onClick:l[10]||(l[10]=(...l)=>e.onToggleFreeze&&e.onToggleFreeze(...l))},R)]),(0,i._)("div",H,[O,(0,i._)("div",{class:"button",onClick:l[11]||(l[11]=(...l)=>e.onReset&&e.onReset(...l))},M)])])])),_:1},8,["modelValue"])]),(0,i._)("div",T,[(0,i._)("img",{class:(0,o.C_)({icon:!0,selected:e.settingDropDisplay}),src:"img/setting_50X50.svg"},null,2),(0,i.Wm)(A,{modelValue:e.settingDropDisplay,"onUpdate:modelValue":l[22]||(l[22]=l=>e.settingDropDisplay=l),anchor:"bottom left",self:"top left",offset:[0,15],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",L,[(0,i._)("div",j,[(0,i._)("div",F,[(0,i._)("img",{style:{width:"15px",height:"15px",margin:"auto",display:"block"},class:(0,o.C_)({isAuthorized:e.isAuthorized}),src:"img/account_15X15.svg"},null,2)]),(0,i._)("div",P,[(0,i._)("div",{class:(0,o.C_)({username:!e.isAuthorized,"username-isAuthorized":e.isAuthorized})},[(0,i._)("div",q,(0,o.zw)(e.username),1)],2),e.isAuthorized?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"button-google",onClick:l[13]||(l[13]=(...l)=>e.onGoogleSignIn&&e.onGoogleSignIn(...l))})),e.isAuthorized?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"button",onClick:l[14]||(l[14]=(...l)=>e.onGoogleSignOut&&e.onGoogleSignOut(...l))},Z)):(0,i.kq)("",!0)])]),(0,i._)("div",E,[W,(0,i._)("div",null,[(0,i.Wm)(U,{options:e.fileLocationList,"option-label":"label","option-value":"value",modelValue:e.fileLocation,"onUpdate:modelValue":l[15]||(l[15]=l=>e.fileLocation=l),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",G,[N,(0,i._)("div",Q,[(0,i.Wm)(ne,{modelValue:e.useMic,"onUpdate:modelValue":l[16]||(l[16]=l=>e.useMic=l),class:"toggle-mic"},null,8,["modelValue"]),(0,i.Wm)(U,{options:e.microDeviceList,"option-label":"label","option-value":"value",modelValue:e.microDevice,"onUpdate:modelValue":l[17]||(l[17]=l=>e.microDevice=l),style:{width:"140px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",Y,[B,(0,i._)("div",null,[(0,i.Wm)(U,{options:e.videoResolutionList,"option-label":"label","option-value":"value",modelValue:e.videoResolution,"onUpdate:modelValue":l[18]||(l[18]=l=>e.videoResolution=l),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",K,[J,(0,i._)("div",null,[(0,i.Wm)(U,{options:e.cameraCountdownSettingList,"option-label":"label","option-value":"value",modelValue:e.cameraCountdownSetting,"onUpdate:modelValue":l[19]||(l[19]=l=>e.cameraCountdownSetting=l),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",$,[ee,(0,i._)("div",le,[(0,i._)("div",ae,[(0,i.wy)((0,i._)("input",{type:"radio",id:"50",name:"refreshRate",value:"50","onUpdate:modelValue":l[20]||(l[20]=l=>e.refreshRate=l)},null,512),[[t.G2,e.refreshRate]]),ie]),(0,i._)("div",oe,[(0,i.wy)((0,i._)("input",{type:"radio",id:"60",name:"refreshRate",value:"60","onUpdate:modelValue":l[21]||(l[21]=l=>e.refreshRate=l)},null,512),[[t.G2,e.refreshRate]]),te])])]),se])])),_:1},8,["modelValue"])]),e.isFullScreen?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ue,ce)),(0,i._)("div",{class:"full-screen",onClick:l[23]||(l[23]=l=>e.isFullScreen=!e.isFullScreen)},[e.isFullScreen?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",ve)),e.isFullScreen?((0,i.wg)(),(0,i.iD)("img",re)):(0,i.kq)("",!0)]),de,(0,i._)("div",{class:"stop-motion",onClick:l[24]||(l[24]=(...l)=>e.onGoStopMotion&&e.onGoStopMotion(...l))},pe),(0,i._)("div",he,[(0,i._)("div",we,[e.cameraCountdown>0?((0,i.wg)(),(0,i.j4)(me,{key:0,"show-value":"",value:e.cameraCountdownProgress,"font-size":"24px",size:"48px",thickness:.15,color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.cameraCountdown),1)])),_:1},8,["value","thickness"])):(0,i.kq)("",!0)]),_e,be]),(0,i._)("div",fe,[(0,i._)("div",ye,[(0,i._)("img",{class:"icon",src:"img/camera_round_80X80.svg",onClick:l[25]||(l[25]=(...l)=>e.onUseCamera&&e.onUseCamera(...l))})]),e.isVideoMode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ke,[(0,i._)("img",{class:"icon",src:"img/video_round_80X80.svg",onClick:l[26]||(l[26]=(...l)=>e.onUseVideoStart&&e.onUseVideoStart(...l))})])),e.isVideoMode?((0,i.wg)(),(0,i.iD)("div",xe,[(0,i._)("div",De,[Ce,Ve,(0,i._)("div",Se,(0,o.zw)(e.videoMinutes)+":"+(0,o.zw)(e.videoSeconds),1)]),(0,i._)("div",{class:"play-pause",onClick:l[27]||(l[27]=(...l)=>e.onUseVideoPause&&e.onUseVideoPause(...l))},[e.videoPause?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",Ie)),e.videoPause?((0,i.wg)(),(0,i.iD)("img",Xe)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"stop",onClick:l[28]||(l[28]=(...l)=>e.onUseVideoStop&&e.onUseVideoStop(...l))},Re)])):(0,i.kq)("",!0),(0,i._)("div",He,[e.useMic?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"icon",src:"img/microphone_round_80X80.svg",onClick:l[29]||(l[29]=(...l)=>e.onUseMic&&e.onUseMic(...l))})):(0,i.kq)("",!0),e.useMic?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",{key:1,class:"icon red",src:"img/microphone-off_round_80X80.svg",onClick:l[30]||(l[30]=(...l)=>e.onUseMic&&e.onUseMic(...l))}))])]),(0,i._)("div",{class:"thumbnail",onClick:l[31]||(l[31]=(...l)=>e.onGoViewer&&e.onGoViewer(...l))},[""!=e.thumbnail?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.thumbnail},null,8,Oe)):(0,i.kq)("",!0),""!==e.outputVideoURL?((0,i.wg)(),(0,i.iD)("video",{key:1,src:e.outputVideoURL},null,8,ze)):(0,i.kq)("",!0)]),(0,i._)("div",{ref:"cameraWapper",class:(0,o.C_)({"camera-screen":!0,"resolution-9_16":.5625==e.resolutionRatio,"full-screen-mode":e.isFullScreen})},[(0,i._)("video",{ref:"localVideo",autoplay:"",playsinline:"",muted:"",style:(0,o.j5)({transform:"scale("+(1==e.angle.value||3==e.angle.value?(e.zoomInOutSlider/10*.75).toString():(e.zoomInOutSlider/10*1).toString())+") rotate("+90*e.angle.value+"deg)"+(e.isMirror?" scaleX(-1)":"")+(e.isFlip?" scaleY(-1)":"")})},null,4),(0,i._)("canvas",Me,null,512)],2)]),(0,i.Wm)(Ae,{modelValue:e.pleaseConnectIdeaoDC400Dialog,"onUpdate:modelValue":l[32]||(l[32]=l=>e.pleaseConnectIdeaoDC400Dialog=l)},{default:(0,i.w5)((()=>[(0,i.Wm)(Le,{class:"confirm-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(ge,{class:"body"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",Te,je,512),[[Ee]]),Fe,Pe])),_:1}),(0,i.Wm)(Ue,{class:"footer"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",qe,Ze,512),[[Ee]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}a(7965),a(2799);var We=a(1959),Ge=a(9582),Ne=a(3617),Qe=a(8825),Ye=a(958),Be=a(1935);const Ke=(0,i.aZ)({name:"PageIndex",components:{combobox2:Be.Z},setup(){const e=(0,Ge.tv)(),l=(0,Ne.oR)(),a=(0,Qe.Z)(),{guidHelper:o,timestampHelper:t,initFileSystem:s,saveFile:u,getUrlByFilename:n}=(0,Ye.Z)(),c=(0,We.iH)(),v=(0,We.iH)(),r=(0,We.Fl)((()=>l.getters["extension/cameraDevice"])),d=(0,We.Fl)((()=>l.getters["extension/microDevice"])),m=(0,We.Fl)((()=>l.getters["extension/resolution"])),g=e=>l.dispatch("extension/setCameraDevice",e),p=e=>l.dispatch("extension/setMicroDevice",e),h=e=>l.dispatch("extension/setResolution",e),w=(0,We.iH)(),_=(0,We.iH)([]),b=(0,We.iH)(),f=(0,We.iH)([]),y=(0,We.Fl)((()=>Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]))),k=(0,We.iH)({label:"640 X 480",value:0}),x=(0,We.iH)([{label:"640 X 360",value:0},{label:"640 X 480",value:1},{label:"960 X 540",value:2},{label:"1024 X 768",value:3},{label:"1280 X 720",value:4},{label:"1600 X 1200",value:5},{label:"1920 X 1080",value:6},{label:"2048 X 1536",value:7},{label:"2560 X 1440",value:8},{label:"3840 X 2160",value:9},{label:"3840 X 2880",value:10}]),D=(0,We.iH)(!1),C=(0,We.iH)(!1),V=(0,We.iH)(!1),S=(0,We.iH)(0),I=(0,We.iH)(0),X=(0,We.iH)(!1),U=(0,We.iH)(!1),R=(0,We.iH)(!1),H=(0,We.iH)(!0),O=(0,We.iH)(!1),z=(0,We.iH)("00"),M=(0,We.iH)("00"),T=(0,We.iH)(""),L=(0,We.iH)(""),j=(0,We.iH)({label:"480 P",value:0}),F=(0,We.iH)([{label:"480 P",value:0},{label:"720 P",value:1},{label:"1080 P",value:2}]),P=(0,We.iH)({label:"Off",value:0}),q=(0,We.iH)([{label:"Off",value:0},{label:"1s",value:1},{label:"2s",value:2},{label:"3s",value:3},{label:"4s",value:4},{label:"5s",value:5}]),A=(0,We.iH)({label:"0°",value:0}),Z=(0,We.iH)([{label:"0°",value:0},{label:"90°",value:1},{label:"180°",value:2},{label:"270°",value:3}]),E=(0,We.iH)(10),W=(0,We.iH)(!1),G=(0,We.iH)(!1),N=(0,We.iH)(!1),Q=(0,We.iH)(50),Y=(0,We.iH)(!1),B=(0,We.iH)(""),K=(0,We.iH)({label:"ideaocam files on google drive",value:"ideaocam files"}),J=(0,We.iH)([{label:"ideaocam files on google drive",value:"ideaocam files"}]),$=(0,We.iH)(!1);let ee=!0,le=null,ae=null,ie=[],oe=null,te=!0,se=null;const ue=(0,We.Fl)((()=>l.getters["extension/viewers"])),ne=e=>l.dispatch("extension/setViewers",e),ce=((0,We.Fl)((()=>l.getters["extension/googleDriveFolder"])),e=>l.dispatch("extension/setGoogleDriveFolder",e)),ve=(0,We.Fl)((()=>l.getters["extension/authToken"])),re=e=>l.dispatch("extension/setAuthToken",e);(0,i.YP)(ve,(async e=>{if(e){let e=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{method:"GET",headers:new Headers({Authorization:"Bearer "+ve.value})}),l=await e.json();if(l.error)return;B.value=l.email,Y.value=!0}else Y.value=!1,B.value=""}),{deep:!0,immediate:!0}),(0,i.YP)(V,(async e=>{ee||(V.value?a.fullscreen.request():a.fullscreen.exit())})),(0,i.YP)((()=>a.fullscreen.isActive),(e=>{ee||(V.value=a.fullscreen.isActive)})),(0,i.YP)(w,(async e=>{e&&!ee&&(g(w.value),k.value=x.value[0],h(x.value[0]),null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null,await ge())})),(0,i.YP)(k,(async e=>{e&&!ee&&(console.log("resolution"),h(k.value),null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null,await ge())})),(0,i.YP)(b,(async e=>{e&&!ee&&(console.log("microDevice"),p(b.value),null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null,await ge())})),(0,i.YP)(Q,(async e=>{e&&!ee&&(console.log("refreshRate"),null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null,await ge())})),(0,i.YP)(K,(async e=>{e&&!ee&&(console.log("fileLocation"),ce(e))})),(0,i.bv)((async()=>{null!=le&&le.getTracks().forEach((function(e){e.stop()}));let e=await navigator.mediaDevices.enumerateDevices(),l=e.filter((e=>"videoinput"===e.kind&&"Ideao DC400 (3429:0005)"===e.label));if(void 0!=l&&null!=l&&0!=l.length||await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),le=null,c.value.srcObject=null,c.value.src=null,V.value=a.fullscreen.isActive,ce(K.value),null!=r.value&&Object.keys(r.value).length>0&&(w.value=r.value),null!=d.value&&Object.keys(d.value).length>0&&(b.value=d.value),null!=m.value&&Object.keys(m.value).length>0?k.value=m.value:(k.value=x.value[0],h(x.value[0])),await de(),await me(),se=await s(),navigator.mediaDevices.ondevicechange=async()=>{if(te=!0,await de(),await me(),0==_.value.length)return _.value=[],w.value={},void g({});w.value=_.value[0],g(w.value),b.value=f.value[0],p(b.value),k.value=x.value[0],h(x.value[0])},await Oe(),ue.value.length>0){let e=await n(se,ue.value[0].filename,ue.value[0].mimeType),l=Object.assign({},ue.value[0]);l.src=e,"image"==l.type?T.value=l.src:L.value=l.src}if(0==_.value.length)return _.value=[],w.value={},g({}),$.value=!0,void(ee=!1);ee=!1,await ge()}));const de=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),l=e.filter((e=>"videoinput"===e.kind&&"Ideao DC400 (3429:0005)"===e.label));_.value=[];for(let a in l)_.value.push({label:l[a].label,value:l[a].deviceId});0==_.value.length?g({}):null!=r.value&&Object.keys(r.value).length>0?(w.value=r.value,g(w.value)):(w.value=_.value[0],g(w.value))},me=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),l=e.filter((e=>"audioinput"===e.kind));f.value=[];for(let a in l)f.value.push({label:l[a].label,value:l[a].deviceId});null!=d.value&&Object.keys(d.value).length>0?(b.value=d.value,p(b.value)):(b.value=f.value[0],p(b.value))},ge=async()=>{if(console.log("createMedia"),!te)return;if(te=!1,void 0==w.value||null==w.value||0==Object.keys(w.value).length)return;null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null;let e=Number(k.value.label.split(" X ")[0]),l=Number(k.value.label.split(" X ")[1]);try{le=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:e},height:{exact:l},frameRate:{min:10,ideal:15}}})}catch(a){console.log(a),alert("The resolution you selected is not supported."),k.value=x.value[0],h(x.value[0]),ee=!1,le=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:Number(k.value.label.split(" X ")[0])},height:{exact:Number(k.value.label.split(" X ")[1])},frameRate:{min:10,ideal:15}}})}le.getAudioTracks().forEach((e=>{e.enabled=H.value})),c.value.onloadedmetadata=function(e){c.value.play()},"srcObject"in c.value?c.value.srcObject=le:c.value.src=window.URL.createObjectURL(le),ae=new MediaRecorder(le),ae.addEventListener("dataavailable",he),ae.addEventListener("stop",we),te=!0},pe=async()=>{null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,c.value.srcObject=null,c.value.src=null;let e=640,l=480;1==j.value.value?(e=1280,l=720):2==j.value.value&&(e=1920,l=1080);try{le=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:e},height:{exact:l},frameRate:{min:10,ideal:15}}})}catch(a){console.log(a),alert("The resolution you selected is not supported."),k.value=x.value[0],h(x.value[0]),ee=!1,le=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:640},height:{exact:480},frameRate:{min:10,ideal:15}}})}le.getAudioTracks().forEach((e=>{e.enabled=H.value})),c.value.onloadedmetadata=function(e){c.value.play()},"srcObject"in c.value?c.value.srcObject=le:c.value.src=window.URL.createObjectURL(le),ae=new MediaRecorder(le),ae.addEventListener("dataavailable",he),ae.addEventListener("stop",we)},he=e=>{ie.push(e.data)},we=async e=>{var l=new Blob(ie,{type:"video/webm; codecs=vp9"});ie=[],T.value="";let a=t()+".webm",i="video/webm";await u(se,a,l,i);let s=await n(se,a,i);L.value=s;let c=Object.assign([],ue.value);c.push({id:o(),type:"video",mimeType:i,filename:a,src:s,ratio:Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]),createTime:new Date}),ne(c),await ge()},_e=()=>{e.push({path:"/stopMotion"})},be=async()=>{if(void 0!=w.value&&null!=w.value&&0!=Object.keys(w.value).length&&!R.value){if(U.value=!0,P.value.value>0){S.value=P.value.value,I.value=1;let e=setInterval((async()=>{S.value-=1,I.value=1/(P.value.value-1)*(P.value.value-S.value)*100,0==S.value&&(clearInterval(e),setTimeout((()=>{fe()}),100))}),1e3)}else setTimeout((()=>{fe()}),100);U.value=!1}},fe=async()=>{v.value.width=le.getVideoTracks()[0].getSettings().width,v.value.height=le.getVideoTracks()[0].getSettings().height;let e=v.value.getContext("2d");e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1,e.imageSmoothingQuality="high",1===A.value.value||3===A.value.value?(v.value.width=le.getVideoTracks()[0].getSettings().height,v.value.height=le.getVideoTracks()[0].getSettings().width,e.translate(v.value.width/2,v.value.height/2),e.rotate(90*A.value.value*Math.PI/180),E.value>10&&e.scale(E.value/10,E.value/10),W.value&&e.scale(-1,1),G.value&&e.scale(1,-1),e.translate(-v.value.height/2,-v.value.width/2)):(e.translate(v.value.width/2,v.value.height/2),e.rotate(90*A.value.value*Math.PI/180),E.value>10&&e.scale(E.value/10,E.value/10),W.value&&e.scale(-1,1),G.value&&e.scale(1,-1),e.translate(-v.value.width/2,-v.value.height/2)),e.drawImage(c.value,0,0),L.value="";let l="image/jpeg",a=t()+".jpg";v.value.toBlob((async e=>{await u(se,a,e,l);let i=await n(se,a,l);T.value=i;let t=Object.assign([],ue.value);t.push({id:o(),type:"image",mimeType:l,filename:a,src:i,ratio:Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]),createTime:new Date}),ne(t)}),l)},ye=async()=>{void 0!=w.value&&null!=w.value&&0!=Object.keys(w.value).length&&(U.value||(R.value=!0,X.value=!0,O.value=!1,await pe(),setTimeout((()=>{ae.start(10),ke()}),100)))},ke=()=>{z.value="00",M.value="00",oe=setInterval((()=>{if(O.value)return;let e=parseInt(M.value)+1;if(M.value=("0"+e).slice(-2),0==e){let e=parseInt(z.value)+1;z.value=("0"+e).slice(-2)}}),1e3)},xe=async()=>{X.value=!1,ae.stop(),clearInterval(oe),R.value=!1},De=async()=>{O.value=!O.value,"recording"===ae.state?ae.pause():"paused"===ae.state&&ae.resume()},Ce=()=>{H.value=!H.value,le.getAudioTracks().forEach((e=>{e.enabled=H.value}))},Ve=()=>{null!=le&&le.getTracks().forEach((function(e){e.stop()})),le=null,e.push({path:"/viewer"})},Se=()=>{60!=E.value&&(E.value=E.value+1)},Ie=()=>{10!=E.value&&(E.value=E.value-1)},Xe=()=>{let e=(0==A.value.value?3:A.value.value-1)%Z.value.length;A.value=Z.value.find((l=>l.value==e))},Ue=()=>{let e=(A.value.value+1)%Z.value.length;A.value=Z.value.find((l=>l.value==e))},Re=()=>{N.value=!c.value.paused,c.value.paused?c.value.play():c.value.pause()},He=()=>{E.value=10,A.value=Z.value[0],W.value=!1,G.value=!1,c.value.play()},Oe=async()=>{gapi.load("client:auth2",(async()=>{gapi.client.init({apiKey:"AIzaSyBqKniM-np2VZ84evk-W0q2jLbJ0sdmO2o",discoveryDocs:[decodeURIComponent("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest"),decodeURIComponent("https://www.googleapis.com/discovery/v1/apis/people/v1/rest"),decodeURIComponent("https://people.googleapis.com/%24discovery/rest?version=v1"),decodeURIComponent("https://classroom.googleapis.com/%24discovery/rest")],clientId:"276709432964-3u3a0fk731gs5eop04vdl2una1dfcl5l.apps.googleusercontent.com",scope:"profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials",fetch_basic_profile:!1}).then((async()=>{let e=gapi.auth2.getAuthInstance();var l=e.currentUser.get().hasGrantedScopes("profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials");if(l){re("");let l=e.currentUser.get();re(l.wc.access_token)}else re("")}))}))},ze=async()=>{{const l=await gapi.auth2.getAuthInstance().signIn();var e=gapi.auth2.getAuthInstance().currentUser.get().hasGrantedScopes("profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials");e&&re(l.wc.access_token)}},Me=async()=>{gapi.auth2.getAuthInstance().disconnect(),re("")};return{localVideo:c,canvas:v,cameraDevice:w,cameraDeviceList:_,fileLocation:K,fileLocationList:J,microDevice:b,microDeviceList:f,resolution:k,resolutionList:x,resolutionRatio:y,menuDropDisplay:D,settingDropDisplay:C,isFullScreen:V,cameraCountdown:S,cameraCountdownProgress:I,isVideoMode:X,useMic:H,videoPause:O,videoMinutes:z,videoSeconds:M,videoResolution:j,videoResolutionList:F,cameraCountdownSetting:P,cameraCountdownSettingList:q,thumbnail:T,outputVideoURL:L,angle:A,angleList:Z,zoomInOutSlider:E,isMirror:W,isFlip:G,isFreeze:N,refreshRate:Q,isAuthorized:Y,username:B,pleaseConnectIdeaoDC400Dialog:$,onGoStopMotion:_e,onUseCamera:be,onUseVideoStart:ye,onUseVideoStop:xe,onUseVideoPause:De,onUseMic:Ce,onGoViewer:Ve,onZoomIn:Se,onZoomOut:Ie,onPreviousRotate:Xe,onNextRotate:Ue,onToggleFreeze:Re,onReset:He,onGoogleSignIn:ze,onGoogleSignOut:Me}}});var Je=a(4260),$e=a(6335),el=a(4015),ll=a(2582),al=a(6122),il=a(5151),ol=a(4390),tl=a(151),sl=a(5589),ul=a(9367),nl=a(677),cl=a(7518),vl=a.n(cl);const rl=(0,Je.Z)(Ke,[["render",Ee],["__scopeId","data-v-20685e28"]]),dl=rl;vl()(Ke,"components",{QMenu:$e.Z,QSlider:el.Z,QToggle:ll.Z,QCircularProgress:al.Z,QResizeObserver:il.Z,QDialog:ol.Z,QCard:tl.Z,QCardSection:sl.Z,QCardActions:ul.Z}),vl()(Ke,"directives",{ClosePopup:nl.Z})}}]);