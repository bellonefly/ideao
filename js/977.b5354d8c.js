"use strict";(self["webpackChunkideao"]=self["webpackChunkideao"]||[]).push([[977],{6877:(e,a,l)=>{l.r(a),l.d(a,{default:()=>aa});l(71);var i=l(3673),o=l(2323),t=l(8880);const s=e=>((0,i.dD)("data-v-5e061e68"),e=e(),(0,i.Cn)(),e),u={class:"wrapper"},n={class:"menu"},c={class:"menu-drop"},v={class:"menu-item"},r=s((()=>(0,i._)("img",{src:"img/camera_45X45.svg"},null,-1))),d={class:"menu-item"},m=s((()=>(0,i._)("img",{src:"img/resolution_45X45.svg"},null,-1))),g={class:"menu-item"},p=s((()=>(0,i._)("img",{src:"img/zoom_45X45.svg"},null,-1))),h={class:"zoomInOut"},w={class:"text"},_={class:"menu-item"},b=s((()=>(0,i._)("img",{src:"img/rotation_45X45.svg"},null,-1))),f={class:"menu-item-right",style:{"justify-content":"start"}},y={class:"menu-item"},k=s((()=>(0,i._)("img",{src:"img/mirror_45X45.svg"},null,-1))),x=s((()=>(0,i._)("div",{class:"text"},"Mirror",-1))),D=[x],V={class:"menu-item"},S=s((()=>(0,i._)("img",{src:"img/flip_45X45.svg"},null,-1))),U=s((()=>(0,i._)("div",{class:"text"},"Flip",-1))),X=[U],I={class:"menu-item"},C=s((()=>(0,i._)("img",{src:"img/freeze_45X45.svg"},null,-1))),R=s((()=>(0,i._)("div",{class:"text"},"Freeze",-1))),H=[R],M={class:"menu-item"},z=s((()=>(0,i._)("img",{src:"img/reset_45X45.svg"},null,-1))),O=s((()=>(0,i._)("div",{class:"text"},"Reset",-1))),L=[O],F={class:"setting"},T={class:"setting-drop"},P={class:"menu-item"},G=s((()=>(0,i._)("img",{src:"img/G_45X45.svg"},null,-1))),j={class:"menu-item-right"},A={class:"username"},q={class:"text"},E=s((()=>(0,i._)("div",{class:"text"},"Sign in",-1))),Z=[E],N=s((()=>(0,i._)("div",{class:"text"},"Sign out",-1))),W=[N],Y={class:"menu-item"},B=s((()=>(0,i._)("img",{src:"img/cloud-file-location_45X45.svg"},null,-1))),Q={class:"menu-item"},K=s((()=>(0,i._)("img",{src:"img/microphone_45X45.svg"},null,-1))),J={class:"menu-item-right"},$={class:"menu-item"},ee=s((()=>(0,i._)("img",{src:"img/video-resolution_45X45.svg"},null,-1))),ae={class:"menu-item"},le=s((()=>(0,i._)("img",{src:"img/timer_45X45.svg"},null,-1))),ie={class:"menu-item"},oe=s((()=>(0,i._)("img",{src:"img/refresh-rate_45X45.svg"},null,-1))),te={class:"radio-wrapper"},se={class:"radio"},ue=s((()=>(0,i._)("label",{for:"50"},[(0,i._)("div",{class:"text"},"50 Hz")],-1))),ne={class:"radio"},ce=s((()=>(0,i._)("label",{for:"60"},[(0,i._)("div",{class:"text"},"60 Hz")],-1))),ve=s((()=>(0,i._)("div",{class:"menu-item fti"},[(0,i._)("img",{src:"img/fti-logo_H48.svg",class:"fti-logo"}),(0,i._)("div",{class:"fti-text"},[(0,i._)("div",{class:"text"}," © Fun Technology Innovation Inc. All rights reserved. ")])],-1))),re=s((()=>(0,i._)("div",{class:"logo"},[(0,i._)("a",{href:"https://funtechinnovation.com/software/ideaocam/",target:"_blank"})],-1))),de={key:0,class:"icon",src:"img/full-screen_50X50.svg"},me={key:1,class:"icon",src:"img/exit-full-screen_50X50.svg"},ge=s((()=>(0,i._)("div",{class:"snapshot-record selected"},[(0,i._)("img",{class:"icon",src:"img/snapshot_40X40.svg"}),(0,i._)("div",{class:"text"},"Snapshot & Record")],-1))),pe=s((()=>(0,i._)("img",{class:"icon",src:"img/stop-motion_40X40.svg"},null,-1))),he=s((()=>(0,i._)("div",{class:"text"},"Stop Motion",-1))),we=[pe,he],_e={class:"countdown"},be={class:"camera"},fe=s((()=>(0,i._)("div",null,null,-1))),ye=s((()=>(0,i._)("div",null,null,-1))),ke={class:"camera-video-mic"},xe={class:"camera"},De={key:0,class:"video"},Ve={key:1,class:"video-mode"},Se={class:"rec"},Ue=s((()=>(0,i._)("div",{class:"dot"},null,-1))),Xe=s((()=>(0,i._)("div",{class:"text"},"REC",-1))),Ie={class:"time"},Ce={key:0,class:"icon",src:"img/pause_40X40.svg"},Re={key:1,class:"icon",src:"img/play_40X40.svg"},He=s((()=>(0,i._)("img",{class:"icon",src:"img/stop_40X40.svg"},null,-1))),Me=[He],ze={class:"mic"},Oe=["src"],Le=["src"],Fe={ref:"canvas",style:{display:"none",position:"absolute",left:"0",top:"0",opacity:"0.5"}};function Te(e,a,l,s,x,U){const R=(0,i.up)("combobox2"),O=(0,i.up)("q-slider"),E=(0,i.up)("q-menu"),N=(0,i.up)("q-toggle"),pe=(0,i.up)("q-circular-progress");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",n,[(0,i._)("img",{class:(0,o.C_)({icon:!0,selected:e.menuDropDisplay}),src:"img/menu_50X50.svg"},null,2),(0,i.Wm)(E,{modelValue:e.menuDropDisplay,"onUpdate:modelValue":a[12]||(a[12]=a=>e.menuDropDisplay=a),anchor:"bottom left",self:"top left",offset:[0,20],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i._)("div",v,[r,(0,i.Wm)(R,{options:e.cameraDeviceList,"option-label":"label","option-value":"value",modelValue:e.cameraDevice,"onUpdate:modelValue":a[0]||(a[0]=a=>e.cameraDevice=a),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])]),(0,i._)("div",d,[m,(0,i._)("div",null,[(0,i.Wm)(R,{options:e.resolutionList,"option-label":"label","option-value":"value",modelValue:e.resolution,"onUpdate:modelValue":a[1]||(a[1]=a=>e.resolution=a),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",g,[p,(0,i._)("div",h,[(0,i._)("div",w,(0,o.zw)(1==(e.zoomInOutSlider/10).toString().length?(e.zoomInOutSlider/10).toString()+".0":(e.zoomInOutSlider/10).toString())+" x ",1),(0,i._)("img",{class:"minus zoom",src:"img/minus_20X20.svg",onClick:a[2]||(a[2]=(...a)=>e.onZoomOut&&e.onZoomOut(...a))}),(0,i.Wm)(O,{modelValue:e.zoomInOutSlider,"onUpdate:modelValue":a[3]||(a[3]=a=>e.zoomInOutSlider=a),min:10,max:60,step:1,"track-size":"4px","thumb-size":"10px","inner-track-color":"white",color:"deep-orange",class:"menu-slider"},null,8,["modelValue"]),(0,i._)("img",{class:"plus",src:"img/plus_20X20.svg",onClick:a[4]||(a[4]=(...a)=>e.onZoomIn&&e.onZoomIn(...a))})])]),(0,i._)("div",_,[b,(0,i._)("div",f,[(0,i.Wm)(R,{options:e.angleList,"option-label":"label","option-value":"value",modelValue:e.angle,"onUpdate:modelValue":a[5]||(a[5]=a=>e.angle=a),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"]),(0,i._)("img",{src:"img/CW_25X25.svg",class:"cw",onClick:a[6]||(a[6]=(...a)=>e.onNextRotate&&e.onNextRotate(...a))}),(0,i._)("img",{src:"img/CCW_25X25.svg",class:"ccw",onClick:a[7]||(a[7]=(...a)=>e.onPreviousRotate&&e.onPreviousRotate(...a))})])]),(0,i._)("div",y,[k,(0,i._)("div",{class:"button",onClick:a[8]||(a[8]=a=>e.isMirror=!e.isMirror)},D)]),(0,i._)("div",V,[S,(0,i._)("div",{class:"button",onClick:a[9]||(a[9]=a=>e.isFlip=!e.isFlip)},X)]),(0,i._)("div",I,[C,(0,i._)("div",{class:"button",onClick:a[10]||(a[10]=(...a)=>e.onToggleFreeze&&e.onToggleFreeze(...a))},H)]),(0,i._)("div",M,[z,(0,i._)("div",{class:"button",onClick:a[11]||(a[11]=(...a)=>e.onReset&&e.onReset(...a))},L)])])])),_:1},8,["modelValue"])]),(0,i._)("div",F,[(0,i._)("img",{class:(0,o.C_)({icon:!0,selected:e.settingDropDisplay}),src:"img/setting_50X50.svg"},null,2),(0,i.Wm)(E,{modelValue:e.settingDropDisplay,"onUpdate:modelValue":a[22]||(a[22]=a=>e.settingDropDisplay=a),anchor:"bottom left",self:"top left",offset:[0,20],style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i._)("div",T,[(0,i._)("div",P,[G,(0,i._)("div",j,[(0,i._)("div",A,[(0,i._)("div",q,(0,o.zw)(e.username),1)]),e.isAuthorized?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"button",onClick:a[13]||(a[13]=(...a)=>e.onGoogleSignIn&&e.onGoogleSignIn(...a))},Z)),e.isAuthorized?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"button",onClick:a[14]||(a[14]=(...a)=>e.onGoogleSignOut&&e.onGoogleSignOut(...a))},W)):(0,i.kq)("",!0)])]),(0,i._)("div",Y,[B,(0,i._)("div",null,[(0,i.Wm)(R,{options:e.fileLocationList,"option-label":"label","option-value":"value",modelValue:e.fileLocation,"onUpdate:modelValue":a[15]||(a[15]=a=>e.fileLocation=a),style:{width:"170px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",Q,[K,(0,i._)("div",J,[(0,i.Wm)(N,{modelValue:e.useMic,"onUpdate:modelValue":a[16]||(a[16]=a=>e.useMic=a),class:"toggle-mic"},null,8,["modelValue"]),(0,i.Wm)(R,{options:e.microDeviceList,"option-label":"label","option-value":"value",modelValue:e.microDevice,"onUpdate:modelValue":a[17]||(a[17]=a=>e.microDevice=a),style:{width:"140px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",$,[ee,(0,i._)("div",null,[(0,i.Wm)(R,{options:e.videoResolutionList,"option-label":"label","option-value":"value",modelValue:e.videoResolution,"onUpdate:modelValue":a[18]||(a[18]=a=>e.videoResolution=a),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",ae,[le,(0,i._)("div",null,[(0,i.Wm)(R,{options:e.cameraCountdownSettingList,"option-label":"label","option-value":"value",modelValue:e.cameraCountdownSetting,"onUpdate:modelValue":a[19]||(a[19]=a=>e.cameraCountdownSetting=a),style:{width:"60px",height:"14px"}},null,8,["options","modelValue"])])]),(0,i._)("div",ie,[oe,(0,i._)("div",te,[(0,i._)("div",se,[(0,i.wy)((0,i._)("input",{type:"radio",id:"50",name:"refreshRate",value:"50","onUpdate:modelValue":a[20]||(a[20]=a=>e.refreshRate=a)},null,512),[[t.G2,e.refreshRate]]),ue]),(0,i._)("div",ne,[(0,i.wy)((0,i._)("input",{type:"radio",id:"60",name:"refreshRate",value:"60","onUpdate:modelValue":a[21]||(a[21]=a=>e.refreshRate=a)},null,512),[[t.G2,e.refreshRate]]),ce])])]),ve])])),_:1},8,["modelValue"])]),re,(0,i._)("div",{class:"full-screen",onClick:a[23]||(a[23]=a=>e.isFullScreen=!e.isFullScreen)},[e.isFullScreen?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",de)),e.isFullScreen?((0,i.wg)(),(0,i.iD)("img",me)):(0,i.kq)("",!0)]),ge,(0,i._)("div",{class:"stop-motion",onClick:a[24]||(a[24]=(...a)=>e.onGoStopMotion&&e.onGoStopMotion(...a))},we),(0,i._)("div",_e,[(0,i._)("div",be,[e.cameraCountdown>0?((0,i.wg)(),(0,i.j4)(pe,{key:0,"show-value":"",value:e.cameraCountdownProgress,"font-size":"24px",size:"48px",thickness:.15,color:"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.cameraCountdown),1)])),_:1},8,["value","thickness"])):(0,i.kq)("",!0)]),fe,ye]),(0,i._)("div",ke,[(0,i._)("div",xe,[(0,i._)("img",{class:"icon",src:"img/camera_round_80X80.svg",onClick:a[25]||(a[25]=(...a)=>e.onUseCamera&&e.onUseCamera(...a))})]),e.isVideoMode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",De,[(0,i._)("img",{class:"icon",src:"img/video_round_80X80.svg",onClick:a[26]||(a[26]=(...a)=>e.onUseVideoStart&&e.onUseVideoStart(...a))})])),e.isVideoMode?((0,i.wg)(),(0,i.iD)("div",Ve,[(0,i._)("div",Se,[Ue,Xe,(0,i._)("div",Ie,(0,o.zw)(e.videoMinutes)+":"+(0,o.zw)(e.videoSeconds),1)]),(0,i._)("div",{class:"play-pause",onClick:a[27]||(a[27]=(...a)=>e.onUseVideoPause&&e.onUseVideoPause(...a))},[e.videoPause?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",Ce)),e.videoPause?((0,i.wg)(),(0,i.iD)("img",Re)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"stop",onClick:a[28]||(a[28]=(...a)=>e.onUseVideoStop&&e.onUseVideoStop(...a))},Me)])):(0,i.kq)("",!0),(0,i._)("div",ze,[e.useMic?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"icon",src:"img/microphone_round_80X80.svg",onClick:a[29]||(a[29]=(...a)=>e.onUseMic&&e.onUseMic(...a))})):(0,i.kq)("",!0),e.useMic?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("img",{key:1,class:"icon red",src:"img/microphone-off_round_80X80.svg",onClick:a[30]||(a[30]=(...a)=>e.onUseMic&&e.onUseMic(...a))}))])]),(0,i._)("div",{class:"thumbnail",onClick:a[31]||(a[31]=(...a)=>e.onGoViewer&&e.onGoViewer(...a))},[""!=e.thumbnail?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.thumbnail},null,8,Oe)):(0,i.kq)("",!0),""!==e.outputVideoURL?((0,i.wg)(),(0,i.iD)("video",{key:1,src:e.outputVideoURL},null,8,Le)):(0,i.kq)("",!0)]),(0,i._)("div",{ref:"cameraWapper",class:(0,o.C_)({"camera-screen":!0,"resolution-9_16":.5625==e.resolutionRatio,"full-screen-mode":e.isFullScreen})},[(0,i._)("video",{ref:"localVideo",autoplay:"",playsinline:"",muted:"",style:(0,o.j5)({transform:"scale("+(1==e.angle.value||3==e.angle.value?(e.zoomInOutSlider/10*.75).toString():(e.zoomInOutSlider/10*1).toString())+") rotate("+90*e.angle.value+"deg)"+(e.isMirror?" scaleX(-1)":"")+(e.isFlip?" scaleY(-1)":"")})},null,4),(0,i._)("canvas",Fe,null,512)],2)])}l(7965),l(2799);var Pe=l(1959),Ge=l(9582),je=l(3617),Ae=l(8825),qe=l(958),Ee=l(1935);const Ze=(0,i.aZ)({name:"PageIndex",components:{combobox2:Ee.Z},setup(){const e=(0,Ge.tv)(),a=(0,je.oR)(),l=(0,Ae.Z)(),{guidHelper:o,timestampHelper:t,initFileSystem:s,saveFile:u,getUrlByFilename:n}=(0,qe.Z)(),c=(0,Pe.iH)(),v=(0,Pe.iH)(),r=(0,Pe.Fl)((()=>a.getters["extension/cameraDevice"])),d=(0,Pe.Fl)((()=>a.getters["extension/microDevice"])),m=(0,Pe.Fl)((()=>a.getters["extension/resolution"])),g=e=>a.dispatch("extension/setCameraDevice",e),p=e=>a.dispatch("extension/setMicroDevice",e),h=e=>a.dispatch("extension/setResolution",e),w=(0,Pe.iH)(),_=(0,Pe.iH)([]),b=(0,Pe.iH)(),f=(0,Pe.iH)([]),y=(0,Pe.Fl)((()=>Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]))),k=(0,Pe.iH)({label:"640 X 480",value:0}),x=(0,Pe.iH)([{label:"640 X 360",value:0},{label:"640 X 480",value:1},{label:"960 X 540",value:2},{label:"1024 X 768",value:3},{label:"1280 X 720",value:4},{label:"1600 X 1200",value:5},{label:"1920 X 1080",value:6},{label:"2048 X 1536",value:7},{label:"2560 X 1440",value:8},{label:"3840 X 2160",value:9},{label:"3840 X 2880",value:10}]),D=(0,Pe.iH)(!1),V=(0,Pe.iH)(!1),S=(0,Pe.iH)(!1),U=(0,Pe.iH)(0),X=(0,Pe.iH)(0),I=(0,Pe.iH)(!1),C=(0,Pe.iH)(!1),R=(0,Pe.iH)(!1),H=(0,Pe.iH)(!0),M=(0,Pe.iH)(!1),z=(0,Pe.iH)("00"),O=(0,Pe.iH)("00"),L=(0,Pe.iH)(""),F=(0,Pe.iH)(""),T=(0,Pe.iH)({label:"480 P",value:0}),P=(0,Pe.iH)([{label:"480 P",value:0},{label:"720 P",value:1},{label:"1080 P",value:2}]),G=(0,Pe.iH)({label:"Off",value:0}),j=(0,Pe.iH)([{label:"Off",value:0},{label:"1s",value:1},{label:"2s",value:2},{label:"3s",value:3},{label:"4s",value:4},{label:"5s",value:5}]),A=(0,Pe.iH)({label:"0°",value:0}),q=(0,Pe.iH)([{label:"0°",value:0},{label:"90°",value:1},{label:"180°",value:2},{label:"270°",value:3}]),E=(0,Pe.iH)(10),Z=(0,Pe.iH)(!1),N=(0,Pe.iH)(!1),W=(0,Pe.iH)(50),Y=(0,Pe.iH)(!1),B=(0,Pe.iH)("Link your Google account"),Q=(0,Pe.iH)({label:"ideaocam files on google drive",value:"ideaocam files"}),K=(0,Pe.iH)([{label:"ideaocam files on google drive",value:"ideaocam files"}]);let J=!0,$=null,ee=null,ae=[],le=null,ie=null;const oe=(0,Pe.Fl)((()=>a.getters["extension/viewers"])),te=e=>a.dispatch("extension/setViewers",e),se=((0,Pe.Fl)((()=>a.getters["extension/googleDriveFolder"])),e=>a.dispatch("extension/setGoogleDriveFolder",e)),ue=(0,Pe.Fl)((()=>a.getters["extension/authToken"])),ne=e=>a.dispatch("extension/setAuthToken",e);(0,i.YP)(ue,(async e=>{if(e){let e=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{method:"GET",headers:new Headers({Authorization:"Bearer "+ue.value})}),a=await e.json();if(a.error)return;B.value=a.email,Y.value=!0}else Y.value=!1,B.value="Link your Google account"}),{deep:!0,immediate:!1}),(0,i.YP)(S,(async e=>{J||(S.value?l.fullscreen.request():l.fullscreen.exit())})),(0,i.YP)((()=>l.fullscreen.isActive),(e=>{J||(S.value=l.fullscreen.isActive)})),(0,i.YP)(w,(async e=>{e&&!J&&(console.log("cameraDevice"),g(w.value),k.value=x.value[0],h(x.value[0]),await re())})),(0,i.YP)(k,(async e=>{e&&!J&&(console.log("resolution"),h(k.value),await re())})),(0,i.YP)(b,(async e=>{e&&!J&&(console.log("microDevice"),p(b.value),await re())})),(0,i.YP)(W,(async e=>{e&&!J&&(console.log("refreshRate"),await re())})),(0,i.YP)(Q,(async e=>{e&&!J&&(console.log("fileLocation"),se(e))})),(0,i.bv)((async()=>{if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,S.value=l.fullscreen.isActive,se(Q.value),null!=r.value&&Object.keys(r.value).length>0&&(w.value=r.value),null!=d.value&&Object.keys(d.value).length>0&&(b.value=d.value),null!=m.value&&Object.keys(m.value).length>0?k.value=m.value:(k.value=x.value[0],h(x.value[0])),await ce(),await ve(),await re(),ie=await s(),navigator.mediaDevices.ondevicechange=async()=>{w.value=_.value[0],g(w.value),b.value=f.value[0],p(b.value),k.value=x.value[0],h(x.value[0]),await ce(),await ve()},await Ce(),oe.value.length>0){let e=await n(ie,oe.value[0].filename,oe.value[0].mimeType),a=Object.assign({},oe.value[0]);a.src=e,"image"==a.type?L.value=a.src:F.value=a.src}J=!1}));const ce=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),a=e.filter((e=>"videoinput"===e.kind));_.value=[];for(let l in a)_.value.push({label:a[l].label,value:a[l].deviceId});null!=r.value&&Object.keys(r.value).length>0?(w.value=r.value,g(w.value)):(w.value=_.value[0],g(w.value))},ve=async()=>{let e=await navigator.mediaDevices.enumerateDevices(),a=e.filter((e=>"audioinput"===e.kind));f.value=[];for(let l in a)f.value.push({label:a[l].label,value:a[l].deviceId});null!=d.value&&Object.keys(d.value).length>0?(b.value=d.value,p(b.value)):(b.value=f.value[0],p(b.value))},re=async()=>{null!=$&&$.getTracks().forEach((function(e){e.stop()})),$=null,c.value.srcObject=null,c.value.src=null;let e=Number(k.value.label.split(" X ")[0]),a=Number(k.value.label.split(" X ")[1]);try{$=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:e},height:{exact:a},frameRate:{ideal:W.value}}})}catch(l){console.log(l),alert("The resolution you selected is not supported."),k.value=x.value[0],h(x.value[0]),J=!1,$=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:Number(k.value.label.split(" X ")[0])},height:{exact:Number(k.value.label.split(" X ")[1])},frameRate:{ideal:W.value}}})}$.getAudioTracks().forEach((e=>{e.enabled=H.value})),c.value.onloadedmetadata=function(e){c.value.play()},"srcObject"in c.value?c.value.srcObject=$:c.value.src=window.URL.createObjectURL($),ee=new MediaRecorder($),ee.addEventListener("dataavailable",me),ee.addEventListener("stop",ge)},de=async()=>{null!=$&&$.getTracks().forEach((function(e){e.stop()})),$=null,c.value.srcObject=null,c.value.src=null;let e=640,a=480;1==T.value.value?(e=1280,a=720):2==T.value.value&&(e=1920,a=1080);try{$=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:e},height:{exact:a},frameRate:{ideal:W.value}}})}catch(l){console.log(l),alert("The resolution you selected is not supported."),k.value=x.value[0],h(x.value[0]),J=!1,$=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b.value.value},video:{deviceId:{exact:w.value.value},width:{exact:640},height:{exact:480},frameRate:{ideal:W.value}}})}$.getAudioTracks().forEach((e=>{e.enabled=H.value})),c.value.onloadedmetadata=function(e){c.value.play()},"srcObject"in c.value?c.value.srcObject=$:c.value.src=window.URL.createObjectURL($),ee=new MediaRecorder($),ee.addEventListener("dataavailable",me),ee.addEventListener("stop",ge)},me=e=>{ae.push(e.data)},ge=async e=>{var a=new Blob(ae,{type:"video/webm; codecs=vp9"});ae=[],L.value="";let l=t()+".webm",i="video/webm";await u(ie,l,a,i);let s=await n(ie,l,i);F.value=s;let c=Object.assign([],oe.value);c.push({id:o(),type:"video",mimeType:i,filename:l,src:s,ratio:Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]),createTime:new Date}),te(c),await re()},pe=()=>{e.push({path:"/stopMotion"})},he=async()=>{if(!R.value){if(C.value=!0,G.value.value>0){U.value=G.value.value,X.value=1;let e=setInterval((async()=>{U.value-=1,X.value=1/(G.value.value-1)*(G.value.value-U.value)*100,0==U.value&&(clearInterval(e),setTimeout((()=>{we()}),100))}),1e3)}else setTimeout((()=>{we()}),100);C.value=!1}},we=async()=>{v.value.width=$.getVideoTracks()[0].getSettings().width,v.value.height=$.getVideoTracks()[0].getSettings().height;let e=v.value.getContext("2d");e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1,e.imageSmoothingQuality="high",1===A.value.value||3===A.value.value?(v.value.width=$.getVideoTracks()[0].getSettings().height,v.value.height=$.getVideoTracks()[0].getSettings().width,e.translate(v.value.width/2,v.value.height/2),e.rotate(90*A.value.value*Math.PI/180),E.value>10&&e.scale(E.value/10,E.value/10),Z.value&&e.scale(-1,1),N.value&&e.scale(1,-1),e.translate(-v.value.height/2,-v.value.width/2)):(e.translate(v.value.width/2,v.value.height/2),e.rotate(90*A.value.value*Math.PI/180),E.value>10&&e.scale(E.value/10,E.value/10),Z.value&&e.scale(-1,1),N.value&&e.scale(1,-1),e.translate(-v.value.width/2,-v.value.height/2)),e.drawImage(c.value,0,0),F.value="";let a="image/jpeg",l=t()+".jpg";v.value.toBlob((async e=>{await u(ie,l,e,a);let i=await n(ie,l,a);L.value=i;let t=Object.assign([],oe.value);t.push({id:o(),type:"image",mimeType:a,filename:l,src:i,ratio:Number(k.value.label.split(" X ")[1])/Number(k.value.label.split(" X ")[0]),createTime:new Date}),te(t)}),a)},_e=async()=>{C.value||(R.value=!0,I.value=!0,M.value=!1,await de(),setTimeout((()=>{ee.start(10),be()}),100))},be=()=>{z.value="00",O.value="00",le=setInterval((()=>{if(M.value)return;let e=parseInt(O.value)+1;if(O.value=("0"+e).slice(-2),0==e){let e=parseInt(z.value)+1;z.value=("0"+e).slice(-2)}}),1e3)},fe=async()=>{I.value=!1,ee.stop(),clearInterval(le),R.value=!1},ye=async()=>{M.value=!M.value,"recording"===ee.state?ee.pause():"paused"===ee.state&&ee.resume()},ke=()=>{H.value=!H.value,$.getAudioTracks().forEach((e=>{e.enabled=H.value}))},xe=()=>{$.getTracks().forEach((function(e){e.stop()})),$=null,e.push({path:"/viewer"})},De=()=>{60!=E.value&&(E.value=E.value+1)},Ve=()=>{10!=E.value&&(E.value=E.value-1)},Se=()=>{let e=(0==A.value.value?3:A.value.value-1)%q.value.length;A.value=q.value.find((a=>a.value==e))},Ue=()=>{let e=(A.value.value+1)%q.value.length;A.value=q.value.find((a=>a.value==e))},Xe=()=>{c.value.paused?c.value.play():c.value.pause()},Ie=()=>{E.value=10,A.value=q.value[0],Z.value=!1,N.value=!1,c.value.play()},Ce=async()=>{gapi.load("client:auth2",(async()=>{gapi.client.init({apiKey:"AIzaSyB3scwKR0F77IM3610rBeCA6AT_9-aNUl8",discoveryDocs:[decodeURIComponent("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest"),decodeURIComponent("https://www.googleapis.com/discovery/v1/apis/people/v1/rest"),decodeURIComponent("https://people.googleapis.com/%24discovery/rest?version=v1"),decodeURIComponent("https://classroom.googleapis.com/%24discovery/rest")],clientId:"276709432964-3u3a0fk731gs5eop04vdl2una1dfcl5l.apps.googleusercontent.com",scope:"profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials",fetch_basic_profile:!1}).then((async()=>{let e=gapi.auth2.getAuthInstance();var a=e.currentUser.get().hasGrantedScopes("profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials");if(a){ne("");let a=e.currentUser.get();ne(a.wc.access_token)}else ne("")}))}))},Re=async()=>{{const a=await gapi.auth2.getAuthInstance().signIn();var e=gapi.auth2.getAuthInstance().currentUser.get().hasGrantedScopes("profile email openid https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/classroom.announcements https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.topics.readonly https://www.googleapis.com/auth/classroom.courseworkmaterials");e&&ne(a.wc.access_token)}},He=async()=>{gapi.auth2.getAuthInstance().disconnect(),ne("")};return{localVideo:c,canvas:v,cameraDevice:w,cameraDeviceList:_,fileLocation:Q,fileLocationList:K,microDevice:b,microDeviceList:f,resolution:k,resolutionList:x,resolutionRatio:y,menuDropDisplay:D,settingDropDisplay:V,isFullScreen:S,cameraCountdown:U,cameraCountdownProgress:X,isVideoMode:I,useMic:H,videoPause:M,videoMinutes:z,videoSeconds:O,videoResolution:T,videoResolutionList:P,cameraCountdownSetting:G,cameraCountdownSettingList:j,thumbnail:L,outputVideoURL:F,angle:A,angleList:q,zoomInOutSlider:E,isMirror:Z,isFlip:N,refreshRate:W,isAuthorized:Y,username:B,onGoStopMotion:pe,onUseCamera:he,onUseVideoStart:_e,onUseVideoStop:fe,onUseVideoPause:ye,onUseMic:ke,onGoViewer:xe,onZoomIn:De,onZoomOut:Ve,onPreviousRotate:Se,onNextRotate:Ue,onToggleFreeze:Xe,onReset:Ie,onGoogleSignIn:Re,onGoogleSignOut:He}}});var Ne=l(4260),We=l(6335),Ye=l(4015),Be=l(2582),Qe=l(6122),Ke=l(5151),Je=l(7518),$e=l.n(Je);const ea=(0,Ne.Z)(Ze,[["render",Te],["__scopeId","data-v-5e061e68"]]),aa=ea;$e()(Ze,"components",{QMenu:We.Z,QSlider:Ye.Z,QToggle:Be.Z,QCircularProgress:Qe.Z,QResizeObserver:Ke.Z})}}]);